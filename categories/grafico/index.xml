<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Grafico on Ítalo Cegatta</title>
    <link>/categories/grafico/index.xml</link>
    <description>Recent content in Grafico on Ítalo Cegatta</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>pt-br</language>
    <atom:link href="/categories/grafico/index.xml" rel="self" type="application/rss+xml" />
    
    <item>
      <title>Grid regular sobre polígonos com pacote sf</title>
      <link>/grid-regular-sobre-poligonos-com-pacote-sf/</link>
      <pubDate>Sat, 29 Jul 2017 00:00:00 +0000</pubDate>
      
      <guid>/grid-regular-sobre-poligonos-com-pacote-sf/</guid>
      <description>&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;if (!require(&amp;quot;pacman&amp;quot;)) install.packages(&amp;quot;pacman&amp;quot;)
pacman::p_load(readr, dplyr, ggplot2, sf)
pacman::p_load_gh(&amp;quot;italocegatta/brmap&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;grid &amp;lt;- st_make_grid(brmap_brasil, cellsize = 5) %&amp;gt;% 
  st_sf()

ggplot() + 
  geom_sf(data = brmap_brasil) +
  geom_sf(data = grid, fill = NA) +
  theme_bw()&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;/post/2017-09-02-grid-regular-sobre-poligonos-com-o-pacote-sf_files/figure-html/unnamed-chunk-2-1.png&#34; width=&#34;4800&#34; /&gt;&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;intersects &amp;lt;- st_intersects(grid, brmap_brasil, F) %&amp;gt;% as.vector()

grid_intersects &amp;lt;- filter(grid, intersects) %&amp;gt;% 
  st_cast(&amp;quot;POLYGON&amp;quot;) 

ggplot() + 
  geom_sf(data = brmap_brasil) +
  geom_sf(data = grid_intersects, fill =NA) +
  theme_bw()&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;/post/2017-09-02-grid-regular-sobre-poligonos-com-o-pacote-sf_files/figure-html/unnamed-chunk-3-1.png&#34; width=&#34;4800&#34; /&gt;&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;grid_intersection &amp;lt;- st_intersection(grid_intersects, brmap_brasil) %&amp;gt;% 
  st_cast(&amp;quot;MULTIPOLYGON&amp;quot;)

ggplot() + 
  geom_sf(data = brmap_brasil) +
  geom_sf(data = grid_intersection, fill =NA) +
  theme_bw()&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;/post/2017-09-02-grid-regular-sobre-poligonos-com-o-pacote-sf_files/figure-html/unnamed-chunk-4-1.png&#34; width=&#34;4800&#34; /&gt;&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;focos &amp;lt;- read_csv2(&amp;quot;https://raw.githubusercontent.com/italocegatta/italocegatta.github.io_source/master/content/dados/base_incendios.csv&amp;quot;) %&amp;gt;% 
  filter(ano == 2016)

focos&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## # A tibble: 27 x 3
##    sigla   ano focos
##    &amp;lt;chr&amp;gt; &amp;lt;int&amp;gt; &amp;lt;int&amp;gt;
##  1    AC  2016    75
##  2    AL  2016    67
##  3    AM  2016  1270
##  4    AP  2016    27
##  5    BA  2016  1818
##  6    CE  2016   159
##  7    DF  2016    42
##  8    ES  2016   299
##  9    GO  2016   889
## 10    MA  2016  1558
## # ... with 17 more rows&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;focos_sf &amp;lt;- focos %&amp;gt;% 
  left_join(brmap_estado, by = &amp;quot;sigla&amp;quot;) %&amp;gt;% 
  st_sf()

ggplot(focos_sf) +
  geom_sf(aes(fill = focos)) +
  geom_sf(data = grid_intersection, fill =NA, color = &amp;quot;black&amp;quot;) +
  scale_fill_viridis_c() +
  theme_bw()&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;/post/2017-09-02-grid-regular-sobre-poligonos-com-o-pacote-sf_files/figure-html/unnamed-chunk-6-1.png&#34; width=&#34;4800&#34; /&gt;&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;# focos_interpolado &amp;lt;- st_interpolate_aw(focos_sf[&amp;quot;focos&amp;quot;], grid_intersection, extensive = FALSE)
# 
# ggplot(focos_interpolado ) +
#   geom_sf(aes(fill = focos)) +
#   scale_fill_viridis_c() +
#   theme_bw()&lt;/code&gt;&lt;/pre&gt;
</description>
    </item>
    
  </channel>
</rss>