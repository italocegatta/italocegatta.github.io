

  
    
  


  





  

<!DOCTYPE html>
<html lang="pt-br">
  <head>
    
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="Hugo 0.37.1 with theme Tranquilpeak 0.4.3-BETA">
    <title>Web scraping: dados de páginas da internet na palma da sua mão</title>
    <meta name="author" content="Ítalo Cegatta">
    <meta name="keywords" content="">

    <link rel="icon" href="/favicon.png">
    

    
    <meta name="description" content="Você já precisou copiar na mão uma informação de texto, valor ou tabela de uma pagina web? Pelo menos no meu trabalho isto é muito comum. Por mais que os dados estejam lá site, eles nunca estão disponíveis todos juntos e no formato que queremos, parece que é de sacanagem. Diante disto, o objetivo deste post é mostrar como podemos utilizar o R para coletar dados de uma página web e esquecer o famooooso ctrl&#43;c/ctrl&#43;v.">
    <meta property="og:description" content="Você já precisou copiar na mão uma informação de texto, valor ou tabela de uma pagina web? Pelo menos no meu trabalho isto é muito comum. Por mais que os dados estejam lá site, eles nunca estão disponíveis todos juntos e no formato que queremos, parece que é de sacanagem. Diante disto, o objetivo deste post é mostrar como podemos utilizar o R para coletar dados de uma página web e esquecer o famooooso ctrl&#43;c/ctrl&#43;v.">
    <meta property="og:type" content="blog">
    <meta property="og:title" content="Web scraping: dados de páginas da internet na palma da sua mão">
    <meta property="og:url" content="/web-scraping-dados-de-paginas-da-internet-na-palma-da-sua-mao/">
    <meta property="og:site_name" content="Ítalo Cegatta">
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="Ítalo Cegatta">
    <meta name="twitter:description" content="Você já precisou copiar na mão uma informação de texto, valor ou tabela de uma pagina web? Pelo menos no meu trabalho isto é muito comum. Por mais que os dados estejam lá site, eles nunca estão disponíveis todos juntos e no formato que queremos, parece que é de sacanagem. Diante disto, o objetivo deste post é mostrar como podemos utilizar o R para coletar dados de uma página web e esquecer o famooooso ctrl&#43;c/ctrl&#43;v.">
    
    

    
    

    
      <meta property="og:image" content="http://i.imgur.com/9MOS3vs.png">
    

    
      <meta property="og:image" content="http://i.imgur.com/M5r4L5G.png">
    
    
      <meta property="og:image" content="http://i.imgur.com/UwMQdpT.png">
    
    

    

    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.4/jquery.fancybox.min.css" integrity="sha256-vuXZ9LGmmwtjqFX1F+EKin1ThZMub58gKULUyf0qECk=" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.4/helpers/jquery.fancybox-thumbs.min.css" integrity="sha256-SEa4XYAHihTcEP1f5gARTB2K26Uk8PsndQYHQC1f4jU=" crossorigin="anonymous" />
    
    
    <link rel="stylesheet" href="/css/style-jsjn0006wyhpyzivf6yceb31gvpjatbcs3qzjvlumobfnugccvobqwxnnaj8.min.css" />
    
    

    
      
<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-77144482-1', 'auto');
ga('send', 'pageview');
</script>

    
    
  </head>

  <body>
    <div id="blog">
      <header id="header" data-behavior="2">
  <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
  <div class="header-title">
    <a class="header-title-link" href="/">Ítalo Cegatta</a>
  </div>
  
    
      <a class="header-right-picture "
         href="/#about">
    
    
    
      
        <img class="header-picture" src="http://i.imgur.com/9MOS3vs.png" alt="Foto do autor" />
      
    
    </a>
  
</header>

      <nav id="sidebar" data-behavior="2">
  <div class="sidebar-container">
    
      <div class="sidebar-profile">
        <a href="/#about">
          <img class="sidebar-profile-picture" src="http://i.imgur.com/9MOS3vs.png" alt="Foto do autor" />
        </a>
        <h4 class="sidebar-profile-name">Ítalo Cegatta</h4>
        
          <h5 class="sidebar-profile-bio">R, Floresta e Data Science</h5>
        
      </div>
    
    <ul class="sidebar-buttons">
      
  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="/">
    
      <i class="sidebar-button-icon fa fa-lg fa-home"></i>
      
      <span class="sidebar-button-desc">Início</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="/categories">
    
      <i class="sidebar-button-icon fa fa-lg fa-bookmark"></i>
      
      <span class="sidebar-button-desc">Categorias</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="/archives">
    
      <i class="sidebar-button-icon fa fa-lg fa-archive"></i>
      
      <span class="sidebar-button-desc">Arquivo</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="/sobre">
    
      <i class="sidebar-button-icon fa fa-lg fa-question"></i>
      
      <span class="sidebar-button-desc">Sobre</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="/mailto:italocegatta@gmail.com">
    
      <i class="sidebar-button-icon fa fa-lg fa-envelope"></i>
      
      <span class="sidebar-button-desc">Email</span>
    </a>
  </li>


    </ul>
    <ul class="sidebar-buttons">
      
  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://github.com/italocegatta">
    
      <i class="sidebar-button-icon fa fa-lg fa-github"></i>
      
      <span class="sidebar-button-desc">GitHub</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.linkedin.com/in/italocegatta">
    
      <i class="sidebar-button-icon fa fa-lg fa-linkedin"></i>
      
      <span class="sidebar-button-desc">Linkedin</span>
    </a>
  </li>


    </ul>
    <ul class="sidebar-buttons">
      
  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="http://eepurl.com/b03nmD">
    
      <i class="sidebar-button-icon fa fa-lg fa-address-book"></i>
      
      <span class="sidebar-button-desc">Inscreva-se</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="/index.xml">
    
      <i class="sidebar-button-icon fa fa-lg fa-rss"></i>
      
      <span class="sidebar-button-desc">RSS</span>
    </a>
  </li>


    </ul>
  </div>
</nav>

      
  <div class="post-header-cover
              text-center
              "
       style="background-image:url('http://i.imgur.com/UwMQdpT.png')"
       data-behavior="2">
    
  </div>


      <div id="main" data-behavior="2"
        class="hasCover
               hasCoverMetaOut
               ">
        <article class="post" itemscope itemType="http://schema.org/BlogPosting">
          
          
            <div class="post-header main-content-wrap text-center">
  
    <h1 class="post-title" itemprop="headline">
      Web scraping: dados de páginas da internet na palma da sua mão
    </h1>
  
  
  <div class="postShorten-meta post-meta">
    
      <time itemprop="datePublished" datetime="2017-06-16T00:00:00Z">
        
  
  
  
  
    16 Junho 2017
  

      </time>
    
    
  
  
    <span>em</span>
    
      <a class="category-link" href="/categories/web-scraping">Web scraping</a>
    
  

  </div>

</div>
          
          <div class="post-content markdown" itemprop="articleBody">
            <div class="main-content-wrap">
              <p>Você já precisou copiar na mão uma informação de texto, valor ou tabela de uma pagina web? Pelo menos no meu trabalho isto é muito comum. Por mais que os dados estejam lá site, eles nunca estão disponíveis todos juntos e no formato que queremos, parece que é de sacanagem. Diante disto, o objetivo deste post é mostrar como podemos utilizar o R para coletar dados de uma página web e esquecer o famooooso <em>ctrl+c/ctrl+v</em>.</p>
<p>Vamos exemplificar o post utilizando o site do IBGE para saber quantos metros cúbicos de lenha de eucalipto foram produzidos em 2015 em cada estado brasileiro. De cara, se os dados não estiverem numa tabela pronta, você já espera ter que entrar em 27 páginas diferentes para pegar esta informação.</p>
<p>Nosso ponto de partida é a página <a href="http://www.ibge.gov.br/estadosat/">States@</a> do IBGE, que reúne diversas informações na escala estadual. Acessando a página podemos ver o código html por trás (utilize a tecla F12) e assim entender como a página está estruturada. Como queremos entrar nos Estados, podemos ver na Figura <a href="#fig:pg1">1</a> que essa informação está abaixo do <code>id=&quot;menu&quot;</code>. Note que ao passarmos o mouse sobre a linha <code>&lt;div id=&quot;menu&quot;&gt;</code> o navegador identifica na página a localização do elemento e ainda nos informa o id CSS de rastreio, no caso <code>div#menu</code>.</p>
<div class="figure"><span id="fig:pg1"></span>
<img src="http://i.imgur.com/VjiEvCM.png" alt="Página inicial do site."  />
<p class="caption">
Figura  1: Página inicial do site.
</p>
</div>
<p>Então já podemos começar a programar e desenhar o acesso aos dados. No R, cada página web é um objeto que precisa ser salvo na memória. Então, cada página é importante para ter os dados ou por ser uma etapa para conseguir os dados. A página inicial (<code>pg_raiz</code>) contém os links para as páginas dos Estados, por isso precisamos acessá-la.</p>
<pre class="r"><code>if (!require(&quot;pacman&quot;)) install.packages(&quot;pacman&quot;)
pacman::p_load(purrr, dplyr, tidyr, stringr, rvest, ggplot2, viridis, scales, sf)
pacman::p_load_gh(&quot;italocegatta/brmap&quot;)</code></pre>
<pre class="r"><code>url_raiz &lt;- &quot;http://www.ibge.gov.br/estadosat/&quot;

pg_raiz &lt;- read_html(url_raiz)</code></pre>
<p>No objeto <code>posfixo_estados</code> temos a parte do link que leva até a página de cada estado. Para ter o link completo, é só juntar com o link da página raiz.</p>
<pre class="r"><code>posfixo_estados &lt;- html_node(pg_raiz, &quot;div#menu&quot;) %&gt;% 
  html_children() %&gt;%
  html_node(&quot;a&quot;) %&gt;% 
  html_attr(&quot;href&quot;)

posfixo_estados</code></pre>
<pre><code>##  [1] &quot;perfil.php?sigla=ro&quot; &quot;perfil.php?sigla=ac&quot; &quot;perfil.php?sigla=am&quot;
##  [4] &quot;perfil.php?sigla=rr&quot; &quot;perfil.php?sigla=pa&quot; &quot;perfil.php?sigla=ap&quot;
##  [7] &quot;perfil.php?sigla=to&quot; &quot;perfil.php?sigla=ma&quot; &quot;perfil.php?sigla=pi&quot;
## [10] &quot;perfil.php?sigla=ce&quot; &quot;perfil.php?sigla=rn&quot; &quot;perfil.php?sigla=pb&quot;
## [13] &quot;perfil.php?sigla=pe&quot; &quot;perfil.php?sigla=al&quot; &quot;perfil.php?sigla=se&quot;
## [16] &quot;perfil.php?sigla=ba&quot; &quot;perfil.php?sigla=mg&quot; &quot;perfil.php?sigla=es&quot;
## [19] &quot;perfil.php?sigla=rj&quot; &quot;perfil.php?sigla=sp&quot; &quot;perfil.php?sigla=pr&quot;
## [22] &quot;perfil.php?sigla=sc&quot; &quot;perfil.php?sigla=rs&quot; &quot;perfil.php?sigla=ms&quot;
## [25] &quot;perfil.php?sigla=mt&quot; &quot;perfil.php?sigla=go&quot; &quot;perfil.php?sigla=df&quot;</code></pre>
<pre class="r"><code>url_estados &lt;- paste0(url_raiz, posfixo_estados)</code></pre>
<p>Vamos agora acessar às páginas de todos os Estados e armazenar no objeto <code>pg_estados</code>.</p>
<pre class="r"><code>pg_estados &lt;- map(url_estados, read_html)</code></pre>
<p>Navegando pela página de um estado qualquer, identificamos que queremos a informação contida no link <em>Extração Vegetal e Silvicultura 2015</em>. Nesse caso, precisamos mais uma vez dos links que leva a esta página (para cada estado). Também é possível, tanto pelo R quanto pelo navegador, ver que esse link está na posição 68 da lista/tablela nomeada como <code>table.temas</code>.</p>
<pre class="r"><code>posfixo_lenha &lt;- map(
  pg_estados,
  ~html_node(.x, &quot;table.temas&quot;) %&gt;% 
    html_children() %&gt;%
    &#39;[&#39;(68) %&gt;%
    html_node(&quot;a&quot;) %&gt;% 
    html_attr(&quot;href&quot;)
  ) %&gt;% 
  flatten_chr()

posfixo_lenha</code></pre>
<pre><code>##  [1] &quot;temas.php?sigla=ro&amp;tema=piaempresa2015&quot;
##  [2] &quot;temas.php?sigla=ac&amp;tema=piaempresa2015&quot;
##  [3] &quot;temas.php?sigla=am&amp;tema=piaempresa2015&quot;
##  [4] &quot;temas.php?sigla=rr&amp;tema=piaempresa2015&quot;
##  [5] &quot;temas.php?sigla=pa&amp;tema=piaempresa2015&quot;
##  [6] &quot;temas.php?sigla=ap&amp;tema=piaempresa2015&quot;
##  [7] &quot;temas.php?sigla=to&amp;tema=piaempresa2015&quot;
##  [8] &quot;temas.php?sigla=ma&amp;tema=piaempresa2015&quot;
##  [9] &quot;temas.php?sigla=pi&amp;tema=piaempresa2015&quot;
## [10] &quot;temas.php?sigla=ce&amp;tema=piaempresa2015&quot;
## [11] &quot;temas.php?sigla=rn&amp;tema=piaempresa2015&quot;
## [12] &quot;temas.php?sigla=pb&amp;tema=piaempresa2015&quot;
## [13] &quot;temas.php?sigla=pe&amp;tema=piaempresa2015&quot;
## [14] &quot;temas.php?sigla=al&amp;tema=piaempresa2015&quot;
## [15] &quot;temas.php?sigla=se&amp;tema=piaempresa2015&quot;
## [16] &quot;temas.php?sigla=ba&amp;tema=piaempresa2015&quot;
## [17] &quot;temas.php?sigla=mg&amp;tema=piaempresa2015&quot;
## [18] &quot;temas.php?sigla=es&amp;tema=piaempresa2015&quot;
## [19] &quot;temas.php?sigla=rj&amp;tema=piaempresa2015&quot;
## [20] &quot;temas.php?sigla=sp&amp;tema=piaempresa2015&quot;
## [21] &quot;temas.php?sigla=pr&amp;tema=piaempresa2015&quot;
## [22] &quot;temas.php?sigla=sc&amp;tema=piaempresa2015&quot;
## [23] &quot;temas.php?sigla=rs&amp;tema=piaempresa2015&quot;
## [24] &quot;temas.php?sigla=ms&amp;tema=piaempresa2015&quot;
## [25] &quot;temas.php?sigla=mt&amp;tema=piaempresa2015&quot;
## [26] &quot;temas.php?sigla=go&amp;tema=piaempresa2015&quot;
## [27] &quot;temas.php?sigla=df&amp;tema=piaempresa2015&quot;</code></pre>
<p>Aqui, mais uma vez, será preciso juntar o <em>link</em> específico de cada estado com a url da página raiz.</p>
<pre class="r"><code>url_lenha &lt;- paste0(url_raiz, posfixo_lenha)

pg_lenha &lt;- map(url_lenha, read_html)</code></pre>
<p>Agora, vamos dar um passo para trás e listar o nome dos Estados na ordem que as páginas são acessadas para podemos utilizar mais à frente.</p>
<pre class="r"><code>lista_estados &lt;- html_node(pg_raiz, &quot;div#menu&quot;) %&gt;% 
  html_children() %&gt;%
  html_node(&quot;img&quot;) %&gt;%
  html_attr(&quot;alt&quot;)

lista_estados</code></pre>
<pre><code>##  [1] &quot;Rondônia&quot;            &quot;Acre&quot;                &quot;Amazonas&quot;           
##  [4] &quot;Roraima&quot;             &quot;Pará&quot;                &quot;Amapá&quot;              
##  [7] &quot;Tocantins&quot;           &quot;Maranhão&quot;            &quot;Piauí&quot;              
## [10] &quot;Ceará&quot;               &quot;Rio Grande do Norte&quot; &quot;Paraíba&quot;            
## [13] &quot;Pernambuco&quot;          &quot;Alagoas&quot;             &quot;Sergipe&quot;            
## [16] &quot;Bahia&quot;               &quot;Minas Gerais&quot;        &quot;Espírito Santo&quot;     
## [19] &quot;Rio de Janeiro&quot;      &quot;São Paulo&quot;           &quot;Paraná&quot;             
## [22] &quot;Santa Catarina&quot;      &quot;Rio Grande do Sul&quot;   &quot;Mato Grosso do Sul&quot; 
## [25] &quot;Mato Grosso&quot;         &quot;Goiás&quot;               &quot;Distrito federal&quot;</code></pre>
<p>O próximo passo é extrair a tabela de informação de cada estado e posteriormente filtrar a informação que é de nosso interesse. Note que é neste momento que a programação se diferencia das atividades manuais: caso seu interesse seja por lenha de pinus, por exemplo, basta alterar uma palavra no código abaixo e ser feliz com o resultado em poucos segundos. Claro que é um exemplo hipotético, dificilmente alguém vai precisar desse código específico, mas o ponto está na capacidade de escrever seu próprio código e não precisar fazer o trabalho manual.</p>
<pre class="r"><code>tabelas &lt;- map(
  set_names(pg_lenha, lista_estados), 
  ~html_node(.x, &quot;table#tabela_temas&quot;) %&gt;% 
  html_table() %&gt;% 
  as_tibble() %&gt;% 
  rename(produto = X1, valor = X2, unidade = X3)
  )

qnt &lt;- map_df(
  tabelas, 
  ~filter(.x, str_detect(produto, c(&quot;Lenha de eucalipto&quot;, &quot;quantidade&quot;))) %&gt;% 
  &#39;[[&#39;(&quot;valor&quot;) 
  ) %&gt;%
  gather(estado, volume) %&gt;% 
  mutate(volume = as.numeric(str_replace_all(volume, &quot;\\.&quot;, &quot;&quot;)))

qnt </code></pre>
<pre><code>## # A tibble: 0 x 2
## # ... with 2 variables: estado &lt;chr&gt;, volume &lt;dbl&gt;</code></pre>
<p>De certa forma já resolvemos o problema, a quantidade de lenha de eucalipto produzida em cada estado no ano de 2015 já está em nossas mãos. Mas vamos dar um passo além e visualizar isso num mapa. O pacote <a href="https://github.com/italocegatta/brmap">brmap</a> possui os polígonos dos Estados brasileiros no formato <code>sf</code>, o novo pacote para manupulação de objetos espaciais no R.</p>
<pre class="r"><code>qnt_mapa &lt;- left_join(brmap_estado, qnt)

ggplot(qnt_mapa) +
  geom_sf(aes(fill = volume)) +
  labs(
    title = &quot;Lenha de eucalipto - quantidade produzida em 2015&quot;,
    subtitle = &quot;IBGE Estados - Extração Vegetal e Silvicultura 2015&quot;
  ) +
  scale_fill_viridis(
    Lenha~de~eucalipto~(m^3), 
    na.value = &quot;grey90&quot;,
    labels = function(x) format(x, big.mark = &quot;.&quot;, decimal.mark = &quot;,&quot;, scientific = FALSE)
  ) +
  theme_bw() +
  theme(legend.position = &quot;bottom&quot;) +
  guides(fill = guide_colorbar(barwidth = 30, title.position = &quot;top&quot;))</code></pre>
<p><img src="/post/2017-06-16-web-scraping-dados-de-paginas-da-internet-na-palma-da-sua-mao_files/figure-html/unnamed-chunk-9-1.png" width="4000" /></p>
<p>Caso tenha alguma dúvida ou sugestão sobre o post, fique à vontade para fazer um comentário ou me contatar por E-mail.</p>
<pre class="r"><code>devtools::session_info()</code></pre>
<pre><code>##  setting  value                       
##  version  R version 3.4.3 (2017-11-30)
##  system   x86_64, mingw32             
##  ui       RTerm                       
##  language (EN)                        
##  collate  Portuguese_Brazil.1252      
##  tz       America/Sao_Paulo           
##  date     2018-03-24                  
## 
##  package     * version    date       source                             
##  assertthat    0.2.0      2017-04-11 CRAN (R 3.4.3)                     
##  backports     1.1.2      2017-12-13 CRAN (R 3.4.3)                     
##  base        * 3.4.3      2017-12-06 local                              
##  bindr         0.1.1      2018-03-13 CRAN (R 3.4.4)                     
##  bindrcpp    * 0.2        2017-06-17 CRAN (R 3.4.3)                     
##  blogdown      0.5        2018-01-24 CRAN (R 3.4.4)                     
##  bookdown      0.7        2018-02-18 CRAN (R 3.4.4)                     
##  brmap       * 0.0.4      2018-02-11 Github (italocegatta/brmap@af57fd2)
##  class         7.3-14     2015-08-30 CRAN (R 3.4.3)                     
##  classInt      0.1-24     2017-04-16 CRAN (R 3.4.3)                     
##  colorspace    1.3-2      2016-12-14 CRAN (R 3.4.3)                     
##  compiler      3.4.3      2017-12-06 local                              
##  crayon        1.3.4      2017-09-16 CRAN (R 3.4.3)                     
##  curl          3.1        2017-12-12 CRAN (R 3.4.3)                     
##  datasets    * 3.4.3      2017-12-06 local                              
##  DBI           0.8        2018-03-02 CRAN (R 3.4.4)                     
##  devtools      1.13.5     2018-02-18 CRAN (R 3.4.3)                     
##  digest        0.6.15     2018-01-28 CRAN (R 3.4.3)                     
##  dplyr       * 0.7.4      2017-09-28 CRAN (R 3.4.3)                     
##  e1071         1.6-8      2017-02-02 CRAN (R 3.4.3)                     
##  evaluate      0.10.1     2017-06-24 CRAN (R 3.4.3)                     
##  ggplot2     * 2.2.1.9000 2018-03-25 Github (tidyverse/ggplot2@3c9c504) 
##  glue          1.2.0      2017-10-29 CRAN (R 3.4.3)                     
##  graphics    * 3.4.3      2017-12-06 local                              
##  grDevices   * 3.4.3      2017-12-06 local                              
##  grid          3.4.3      2017-12-06 local                              
##  gridExtra     2.3        2017-09-09 CRAN (R 3.4.3)                     
##  gtable        0.2.0      2016-02-26 CRAN (R 3.4.3)                     
##  highr         0.6        2016-05-09 CRAN (R 3.4.3)                     
##  htmltools     0.3.6      2017-04-28 CRAN (R 3.4.3)                     
##  httr          1.3.1      2017-08-20 CRAN (R 3.4.3)                     
##  knitr         1.20       2018-02-20 CRAN (R 3.4.4)                     
##  lazyeval      0.2.1      2017-10-29 CRAN (R 3.4.3)                     
##  magrittr      1.5        2014-11-22 CRAN (R 3.4.3)                     
##  memoise       1.1.0      2017-04-21 CRAN (R 3.4.3)                     
##  methods     * 3.4.3      2017-12-06 local                              
##  munsell       0.4.3      2016-02-13 CRAN (R 3.4.3)                     
##  pacman      * 0.4.6      2017-05-14 CRAN (R 3.4.3)                     
##  pillar        1.2.1      2018-02-27 CRAN (R 3.4.4)                     
##  pkgconfig     2.0.1      2017-03-21 CRAN (R 3.4.3)                     
##  plyr          1.8.4      2016-06-08 CRAN (R 3.4.3)                     
##  purrr       * 0.2.4      2017-10-18 CRAN (R 3.4.3)                     
##  R6            2.2.2      2017-06-17 CRAN (R 3.4.3)                     
##  Rcpp          0.12.16    2018-03-13 CRAN (R 3.4.4)                     
##  rlang         0.2.0.9001 2018-03-25 Github (r-lib/rlang@870a6bf)       
##  rmarkdown     1.9        2018-03-01 CRAN (R 3.4.4)                     
##  rprojroot     1.3-2      2018-01-03 CRAN (R 3.4.3)                     
##  rvest       * 0.3.2      2016-06-17 CRAN (R 3.4.3)                     
##  scales      * 0.5.0.9000 2018-02-11 Github (hadley/scales@d767915)     
##  selectr       0.3-2      2018-03-05 CRAN (R 3.4.4)                     
##  sf          * 0.6-1      2018-03-22 CRAN (R 3.4.3)                     
##  stats       * 3.4.3      2017-12-06 local                              
##  stringi       1.1.7      2018-03-12 CRAN (R 3.4.4)                     
##  stringr     * 1.3.0      2018-02-19 CRAN (R 3.4.4)                     
##  tibble        1.4.2      2018-01-22 CRAN (R 3.4.3)                     
##  tidyr       * 0.8.0      2018-01-29 CRAN (R 3.4.3)                     
##  tools         3.4.3      2017-12-06 local                              
##  udunits2      0.13       2016-11-17 CRAN (R 3.4.1)                     
##  units         0.5-1      2018-01-08 CRAN (R 3.4.3)                     
##  utf8          1.1.3      2018-01-03 CRAN (R 3.4.3)                     
##  utils       * 3.4.3      2017-12-06 local                              
##  viridis     * 0.5.0      2018-02-02 CRAN (R 3.4.3)                     
##  viridisLite * 0.3.0      2018-02-01 CRAN (R 3.4.3)                     
##  withr         2.1.2      2018-03-25 Github (jimhester/withr@79d7b0d)   
##  xfun          0.1        2018-01-22 CRAN (R 3.4.4)                     
##  xml2        * 1.2.0      2018-01-24 CRAN (R 3.4.3)                     
##  yaml          2.1.18     2018-03-08 CRAN (R 3.4.4)</code></pre>

              
            </div>
          </div>
          <div id="post-footer" class="post-footer main-content-wrap">
            
              
                
                
                  <div class="post-footer-tags">
                    <span class="text-color-light text-small">ETIQUETADO em</span><br/>
                    
  <a class="tag tag--primary tag--small" href="/tags/purrr/">purrr</a>

  <a class="tag tag--primary tag--small" href="/tags/dplyr/">dplyr</a>

  <a class="tag tag--primary tag--small" href="/tags/tidyr/">tidyr</a>

  <a class="tag tag--primary tag--small" href="/tags/stringr/">stringr</a>

  <a class="tag tag--primary tag--small" href="/tags/rvest/">rvest</a>

  <a class="tag tag--primary tag--small" href="/tags/ggplot2/">ggplot2</a>

  <a class="tag tag--primary tag--small" href="/tags/viridis/">viridis</a>

  <a class="tag tag--primary tag--small" href="/tags/scales/">scales</a>

  <a class="tag tag--primary tag--small" href="/tags/sf/">sf</a>

  <a class="tag tag--primary tag--small" href="/tags/brmap/">brmap</a>

                  </div>
                
              
            
            
  <div class="post-actions-wrap">
      <nav >
        <ul class="post-actions post-action-nav">
          
            <li class="post-action">
              
                <a class="post-action-btn btn btn--default tooltip--top" href="/graficos-com-dimensao-espacial-e-temporal/" data-tooltip="Gráficos com dimensão espacial e temporal">
              
                  <i class="fa fa-angle-left"></i>
                  <span class="hide-xs hide-sm text-small icon-ml">PRÓXIMO</span>
                </a>
            </li>
            <li class="post-action">
              
                <a class="post-action-btn btn btn--default tooltip--top" href="/interpolacao-pelo-inverso-do-quadrado-da-distancia/" data-tooltip="Interpolação pelo inverso do quadrado da distância">
              
                  <span class="hide-xs hide-sm text-small icon-mr">ANTERIOR</span>
                  <i class="fa fa-angle-right"></i>
                </a>
            </li>
          
        </ul>
      </nav>
    <ul class="post-actions post-action-share" >
      
        <li class="post-action hide-lg hide-md hide-sm">
          <a class="post-action-btn btn btn--default btn-open-shareoptions" href="#btn-open-shareoptions">
            <i class="fa fa-share-alt"></i>
          </a>
        </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://www.facebook.com/sharer/sharer.php?u=/web-scraping-dados-de-paginas-da-internet-na-palma-da-sua-mao/">
              <i class="fa fa-facebook-official"></i>
            </a>
          </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://twitter.com/intent/tweet?text=/web-scraping-dados-de-paginas-da-internet-na-palma-da-sua-mao/">
              <i class="fa fa-twitter"></i>
            </a>
          </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://plus.google.com/share?url=/web-scraping-dados-de-paginas-da-internet-na-palma-da-sua-mao/">
              <i class="fa fa-google-plus"></i>
            </a>
          </li>
        
      
      
      <li class="post-action">
        
          <a class="post-action-btn btn btn--default" href="#">
        
          <i class="fa fa-list"></i>
        </a>
      </li>
    </ul>
  </div>


            
              
            
          </div>
        </article>
        <footer id="footer" class="main-content-wrap">
  <span class="copyrights">
    &copy; 2018 Ítalo Cegatta. All Rights Reserved
  </span>
</footer>

      </div>
      <div id="bottom-bar" class="post-bottom-bar" data-behavior="2">
        
  <div class="post-actions-wrap">
      <nav >
        <ul class="post-actions post-action-nav">
          
            <li class="post-action">
              
                <a class="post-action-btn btn btn--default tooltip--top" href="/graficos-com-dimensao-espacial-e-temporal/" data-tooltip="Gráficos com dimensão espacial e temporal">
              
                  <i class="fa fa-angle-left"></i>
                  <span class="hide-xs hide-sm text-small icon-ml">PRÓXIMO</span>
                </a>
            </li>
            <li class="post-action">
              
                <a class="post-action-btn btn btn--default tooltip--top" href="/interpolacao-pelo-inverso-do-quadrado-da-distancia/" data-tooltip="Interpolação pelo inverso do quadrado da distância">
              
                  <span class="hide-xs hide-sm text-small icon-mr">ANTERIOR</span>
                  <i class="fa fa-angle-right"></i>
                </a>
            </li>
          
        </ul>
      </nav>
    <ul class="post-actions post-action-share" >
      
        <li class="post-action hide-lg hide-md hide-sm">
          <a class="post-action-btn btn btn--default btn-open-shareoptions" href="#btn-open-shareoptions">
            <i class="fa fa-share-alt"></i>
          </a>
        </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://www.facebook.com/sharer/sharer.php?u=/web-scraping-dados-de-paginas-da-internet-na-palma-da-sua-mao/">
              <i class="fa fa-facebook-official"></i>
            </a>
          </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://twitter.com/intent/tweet?text=/web-scraping-dados-de-paginas-da-internet-na-palma-da-sua-mao/">
              <i class="fa fa-twitter"></i>
            </a>
          </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://plus.google.com/share?url=/web-scraping-dados-de-paginas-da-internet-na-palma-da-sua-mao/">
              <i class="fa fa-google-plus"></i>
            </a>
          </li>
        
      
      
      <li class="post-action">
        
          <a class="post-action-btn btn btn--default" href="#">
        
          <i class="fa fa-list"></i>
        </a>
      </li>
    </ul>
  </div>


      </div>
      <div id="share-options-bar" class="share-options-bar" data-behavior="2">
  <i id="btn-close-shareoptions" class="fa fa-close"></i>
  <ul class="share-options">
    
      <li class="share-option">
        <a class="share-option-btn" target="new" href="https://www.facebook.com/sharer/sharer.php?u=%2Fweb-scraping-dados-de-paginas-da-internet-na-palma-da-sua-mao%2F">
          <i class="fa fa-facebook-official"></i><span>Compartilhar no Facebook</span>
        </a>
      </li>
    
      <li class="share-option">
        <a class="share-option-btn" target="new" href="https://twitter.com/intent/tweet?text=%2Fweb-scraping-dados-de-paginas-da-internet-na-palma-da-sua-mao%2F">
          <i class="fa fa-twitter"></i><span>Compartilhar no Twitter</span>
        </a>
      </li>
    
      <li class="share-option">
        <a class="share-option-btn" target="new" href="https://plus.google.com/share?url=%2Fweb-scraping-dados-de-paginas-da-internet-na-palma-da-sua-mao%2F">
          <i class="fa fa-google-plus"></i><span>Compartilhar no Google&#43;</span>
        </a>
      </li>
    
  </ul>
</div>
<div id="share-options-mask" class="share-options-mask"></div>
    </div>
    
    <div id="about">
  <div id="about-card">
    <div id="about-btn-close">
      <i class="fa fa-remove"></i>
    </div>
    
      <img id="about-card-picture" src="http://i.imgur.com/9MOS3vs.png" alt="Foto do autor" />
    
    <h4 id="about-card-name">Ítalo Cegatta</h4>
    
      <div id="about-card-bio">R, Floresta e Data Science</div>
    
    
      <div id="about-card-job">
        <i class="fa fa-briefcase"></i>
        <br/>
        Suzano Papel e Celulose
      </div>
    
    
      <div id="about-card-location">
        <i class="fa fa-map-marker"></i>
        <br/>
        Itapetininga-SP
      </div>
    
  </div>
</div>

    <div id="algolia-search-modal" class="modal-container">
  <div class="modal">
    <div class="modal-header">
      <span class="close-button"><i class="fa fa-close"></i></span>
      <a href="https://algolia.com" target="_blank" rel="noopener" class="searchby-algolia text-color-light link-unstyled">
        <span class="searchby-algolia-text text-color-light text-small">by</span>
        <img class="searchby-algolia-logo" src="https://www.algolia.com/static_assets/images/press/downloads/algolia-light.svg">
      </a>
      <i class="search-icon fa fa-search"></i>
      <form id="algolia-search-form">
        <input type="text" id="algolia-search-input" name="search"
          class="form-control input--large search-input" placeholder="Pesquisar" />
      </form>
    </div>
    <div class="modal-body">
      <div class="no-result text-color-light text-center"></div>
      <div class="results">
        
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="/qual-estado-tem-mais-pau-rodado/">
                <h3 class="media-heading">Qual Estado tem mais pau-rodado?</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  Mar 3, 2018
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather">Em Cuiabá, cidade que nasci e cresci, pau-rodado é um substantivo que define pessoas que nasceram em outro Estado mas moram em Cuiabá e ali construíram suas vidas. Aliás, Cuiabá sempre foi conhecida por ser uma Cidade super acolhedora e talvez por isso todos encaram o dito pau-rodado de uma forma engraçada e sem qualquer sentido pejorativo.
Muito bem, meu interesse com este post é analisar o comportamento dos fluxos migratórios entre Estados e assim encontrar os Estados que tem mais e menos pau-rodado em sua população residente.</div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="/100-anos-do-posto-meteorologico-da-esalq/">
                <h3 class="media-heading">100 anos do posto meteorológico da ESALQ</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  Oct 10, 2017
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather">No dia 31 de dezembro de 2016 o Posto Meteorológico da ESALQ/USP completou 100 anos de funcionamento. Em ‘comemoração’ a este belo banco de dados, pretendo fazer alguns gráficos para analisar, sem muita pretensão, como o clima variou de lá pra cá.
No site do Posto podemos encontrar os dados nas escalas diária e mensal. Separei apenas os dados mensais para vermos aqui. Fiz algumas poucas adaptações no banco para poder pelo menos iniciar a análise.</div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="/engenheiro-florestal-ou-cientista-de-dados/">
                <h3 class="media-heading">Engenheiro Florestal ou Cientista de Dados?</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  Sep 9, 2017
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather">No meio do colegial tive a sorte de ser ‘convencido’ por um amigo da família que Engenharia Florestal seria uma ótima profissão para mim. Vocês sabem que um jovem de 16 anos pouco sabe sobre o mercado de trabalho. Naquela época o único contato profissional que tive foi como menor aprendiz numa concessionária de veículos.
Chegando na ESALQ para o curso de Eng. Florestal, a primeira coisa que eu fiz foi entrar no Grupo Florestal Monte Olimpo (GFMO).</div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="/como-um-cientista-de-dados-pesquisa-o-carro-que-quer-comprar/">
                <h3 class="media-heading">Como um cientista de dados pesquisa o carro que quer comprar?</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  Jul 7, 2017
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather">Estou naquela parte da vida em que se planeja comprar um carro. Como eu sou, acima de todos os sonhos, pão duro, decidir qual marca, modelo, versão e ano do veículo não vai ser fácil. Pensando nisso resolvi escrever um pacote no R para me ajudar a tomar esta decisão. O objetivo deste post é apresentar o pacote e as funções que auxiliam na coleta das informações da tabela FIPE.</div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="/graficos-com-dimensao-espacial-e-temporal/">
                <h3 class="media-heading">Gráficos com dimensão espacial e temporal</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  Jul 7, 2017
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather">O post de hoje é sobre visualização de dados com dimensão espacial e temporal. Basicamente são gráficos que têm uma representação geográfica associada a informações que variam no tempo. Este tipo de análise é comum no meu dia a dia e por isso resolvi deixar 3 alternativas resgistradas aqui. O contexto que iremos abordar está relacionado ao banco de dados de focos de incêndios registrados pelo INPE no Programa Queimadas Monitoramento por Satélites.</div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="/web-scraping-dados-de-paginas-da-internet-na-palma-da-sua-mao/">
                <h3 class="media-heading">Web scraping: dados de páginas da internet na palma da sua mão</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  Jun 6, 2017
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather">Você já precisou copiar na mão uma informação de texto, valor ou tabela de uma pagina web? Pelo menos no meu trabalho isto é muito comum. Por mais que os dados estejam lá site, eles nunca estão disponíveis todos juntos e no formato que queremos, parece que é de sacanagem. Diante disto, o objetivo deste post é mostrar como podemos utilizar o R para coletar dados de uma página web e esquecer o famooooso ctrl+c/ctrl+v.</div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="/interpolacao-pelo-inverso-do-quadrado-da-distancia/">
                <h3 class="media-heading">Interpolação pelo inverso do quadrado da distância</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  Apr 4, 2017
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather">É comum quando temos um determinado valor distribuído espacialmente e queremos estimá-lo para um ponto específico. Existem inúmeras formas de se chegar nesta estimativa, mas quero mostrar apenas uma neste post. O objetivo é estimar o quanto choveu em Itapetininga-SP, a partir de dados de chuva de outras 6 cidades próximas. Utilizaremos para isso os dados das estações automáticas do INMET.
Primeiro, vamos importar e visualizar os dados que temos disponível.</div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="/download-automatico-de-imagens-modis/">
                <h3 class="media-heading">Download automático de imagens MODIS</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  Jan 1, 2017
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather">O MODIS (MODerate resolution Imaging Spectroradiometer) faz parte de um programa da NASA para monitoramento da superfície terrestre. Os satélites Terra e Aqua fornecem informações muito interessantes para o setor agroflorestal e nos permite entender de maneira bastante eficaz a dinâmica do uso do solo e de crescimento das nossas culturas.
O MODOIS tem diversos produtos, mas neste post vamos tratar especificamente do produto MOD13Q1, que disponibiliza a cada 16 dias um raster de EVI e NDVI com resolução de 250 m.</div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="/indice-de-uniformidade-pv50/">
                <h3 class="media-heading">Índice de uniformidade (PV50)</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  Oct 10, 2016
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather">O PV50 é hoje o índice mais utilizado quando queremos expressar a uniformidade de um plantio florestal. Hakamada (2012) apresentou um estudo detalhado sobre diversos índices e concluiu que o PV50 é o índice mais indicado para explicar a relação entre uniformidade, qualidade silvicultural e produtividade em plantios homogêneos de Eucalyptus.
O objetivo deste post é mostrar, passo a passo, como calcular este índice no R e fazer uma breve análise de seus resultados.</div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="/anova-e-teste-de-tukey/">
                <h3 class="media-heading">ANOVA e teste de Tukey</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  Sep 9, 2016
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather">Análise de variância (ANOVA) e testes de médias são métodos comuns em artigos científicos. Você com certeza já viu aquelas letrinhas indicando a diferença entre tratamentos em algum estudo publicado. Por mais que este método esteja entrando em desuso - há uma tendência em abandonar esse tipo de abordagem estatística - penso que ainda o veremos por muitos anos no meio científico.
Como contexto, temos um teste de 5 progênies de eucalipto e queremos avaliar se volume por hectare (nossa variável resposta), difere entre os tratamentos.</div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
      </div>
    </div>
    <div class="modal-footer">
      <p class="results-count text-medium"
         data-message-zero=""
         data-message-one=""
         data-message-other="">
         19 posts found
      </p>
    </div>
  </div>
</div>
    
  
    
    <div id="cover" style="background-image:url('http://i.imgur.com/0YSWdvY.png');"></div>
  


    
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.2.4/jquery.min.js" integrity="sha256-BbhdlvQf/xTY9gja0Dq3HiwQF8LaCRTXxZKRutelT44=" crossorigin="anonymous"></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js" integrity="sha256-/BfiIkHlHoVihZdc6TFuj7MmJ0TWcWsMXkeDFwhi0zw=" crossorigin="anonymous"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.7/js/jquery.fancybox.min.js" integrity="sha256-GEAnjcTqVP+vBp3SSc8bEDQqvWAZMiHyUSIorrWwH50=" crossorigin="anonymous"></script>


<script src="/js/script-qi9wbxp2ya2j6p7wx1i6tgavftewndznf4v0hy2gvivk1rxgc3lm7njqb6bz.min.js"></script>



<script>
$(document).ready(function() {
  hljs.configure({ classPrefix: '', useBR: false });
  $('pre.code-highlight > code, pre > code').each(function(i, block) {
    if (!$(this).hasClass('codeblock')) {
      $(this).addClass('codeblock');
    }
    hljs.highlightBlock(block);
  });
});
</script>


  
    
  



    
  </body>
</html>

